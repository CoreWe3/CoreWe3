<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=ascii">
<link rel=Edit-Time-Data href="./tutorial-mincaml.files/editdata.mso">
<link rel="stylesheet" href="sh.css" type="text/css">
<title>A Crash Course for the MinCaml Compiler</title>
</head>
<body bgcolor="#FFFFFF" link=blue vlink=purple class="Normal">
<div>
  <h3>Lexical Analysis (<tt>lexer.mll</tt>)</h3>
  <p>Seen from a computer, even ML programs are just sequences of characters at first. For example, the previous program <tt>gcd</tt> looks like:</p>
  <p align=center style='text-align:center'><tt>'l' 'e' 't' ' ' 'r' 'e' 'c' ' ' 'g' 'c' 'd' ' ' 'm' ' ' 'n' ' ' '=' </tt>...</p>
  <p>Since we cannot do anything to such a string as it is, we first separate it to <em>tokens</em> like:</p>
  <p align=center style='text-align:center'><tt>&quot;let&quot; &quot;rec&quot; &quot;gcd&quot; &quot;m&quot; &quot;n&quot; &quot;=&quot; </tt>...</p>
  <p>This process is called <em>lexical analysis</em>.</p>
  <p>Although there are many methods for lexical analysis, we here use a tool called <tt>ocamllex</tt>, which is indeed developed for lexical analysis in OCaml. The file is <tt>lexer.mll</tt>. We leave the details of <tt>ocamllex</tt> to its <a target="_blank"
href="http://caml.inria.fr/pub/docs/manual-ocaml/manual026.html">manual</a> and explain only the highlight. We write down a list of rules <a target="srcview"
href="min-caml.html#lexer_int">such as</a></p>
  <p><tt>| '-'? digit+<br>
&nbsp;&nbsp;&nbsp; { INT(int_of_string (Lexing.lexeme lexbuf)) }</tt></p>
  <p>in a syntax like pattern matching, meaning that &quot;if the string matches regular expression <tt>'-'? digit+</tt>, return an <tt>INT</tt> token.&quot; The data type of tokens (such as <tt>INT</tt>) is defined in <tt>parser.mly</tt>, which is explained next. The phrase <tt>Lexing.lexeme lexbuf</tt> can be considered as a &quot;magic spell&quot; meaning the string being analyzed.</p>
  <p><a
href="tutorial-mincaml-7.eng.htm">Next</a></p>
</div>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1484933-2";
urchinTracker();
</script>
</body>
</html>
