CoreWe3 コア

とりあえず全命令実装し、fib.s fib_rec.s loopback.s
stack_test.s memtest.sで正常に動くことを確認しました。
基板上でで動かすには、まずこのフォルダ内にある
すべての.vhdファイルと.ucfファイルをISEのプロジェクトに追加します。次に
実行するコードをcore.vhd内のジェネリックパラメータCODEに
このフォルダからの相対パスで指定します。読み込めるコードは
テキスト形式で書かれた2進表記の命令列(*.binファイル)のみです。
使い方はアセンブリファイル(*.s)がfile/にある状態で
$ make
とすると.binファイルが生成されます。
またCODEに"bootload"と指定するとブートローダが最初に読み込まれます。
RS-232cを通して実行ファイルを送ることで、そのコードが読み込まれ、
実行されます。実行ファイルも
$ make
とすることで生成できます。
debug/以下はデバッグに用いたコードです。

* 汎用レジスタr63はハードウェアでlink registerとして使用
JSUB Cx : sp-=1; [sp]=r63; r63=pc+1; pc=pc+Cx
RET     : pc=r63; r63=[sp]; sp+=1