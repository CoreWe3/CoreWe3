CoreWe3 コア

とりあえず全命令実装し、fib.s fib_rec.s loopback.s stack_test.s で
正常に動くことを確認しました。基板上でで動かすには、まずこのフォルダ内にある
すべての.vdhファイルと.ucfファイルをISEのプロジェクトに追加します。次に
実行するコードをcore.vhd内のジェネリックパラメータCODEに
このフォルダからの相対パスで指定します。読み込めるコードは
テキスト形式で書かれた2進表記の命令列(*.tbinファイル)のみです。
assemblerで出力したバイナリを変換するスクリプトはfile/以下にあります。
使い方はアセンブリファイル.sがfile/にある状態で
$ make (.tbinファイル)
とすると.tbinファイルが生成されます。
またCODEに"bootload"と指定するとブートローダが最初に読み込まれます。
RS-232cを通して.cw3ファイルを送ることで、そのコードが読み込まれ、
実行されます。.cw3ファイルも
$ make (*.cw3ファイル)
とすることで生成できます。
debug/以下はデバッグに用いたコードです。

*IOに関して
0xffffのアドレスの読み書きはIO操作ですが、
ストアは下位８ビットのみを送り、それ以外は捨てられます。
ロードは下位８ビットに１バイト分のデータが入り、
残りの上位ビットは０で埋められます。
